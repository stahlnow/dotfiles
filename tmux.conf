# remap prefix from 'C-b' to 'C-a'
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# reload config file (change file location to your the tmux.conf you want to use)
bind ü source-file ~/.tmux.conf

# fix home end keys
bind -n End send-key C-e
bind -n Home send-key C-a

# set history
set -g history-limit 50000

# reduce ESC keypress delay to 0
set -sg escape-time 0

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# split panes using e for | and h for -
bind e split-window -h -c "#{pane_current_path}"
bind h split-window -v -c "#{pane_current_path}"
bind E split-window -h -c "#{pane_current_path}" \; swap-pane -U

unbind '"'
unbind %

# swap panes to left with ä 
bind ä swap-pane -U

# even layout
bind ö select-layout even-horizontal

# switch windows ctrl+number
# following bindingings are defined in alacritty.yml term emulator config
#bind-key -n C-1 select-window -t 1
#bind-key -n C-2 select-window -t 2
#bind-key -n C-3 select-window -t 3
#bind-key -n C-4 select-window -t 4
#bind-key -n C-5 select-window -t 5
#bind-key -n C-6 select-window -t 6
#bind-key -n C-7 select-window -t 7
#bind-key -n C-8 select-window -t 8
#bind-key -n C-9 select-window -t 9

# clear screen with <prefix> C-l,
# C-l without prefix is used by vim-tmux-navigator
bind C-l send-keys 'C-l'

# set -g default-terminal "tmux"
# set -ga terminal-overrides ",rxvt-unicode-256color:Tc"

# set vim mode
set -g status-keys vi
setw -g mode-keys vi

# start copy mode with Escape
unbind [
bind Escape copy-mode

# copy keys: v = select, y = copy, q = block mode
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection
bind-key -T copy-mode-vi q send-keys -X rectangle-toggle

# switch panes using Ctrl-arrow without prefix
#bind -n C-Left select-pane -L
#bind -n C-Right select-pane -R
#bind -n C-Up select-pane -U
#bind -n C-Down select-pane -D

#bind -n C-Down resize-pane -D
#bind -n C-Up resize-pane -U
#bind -n C-Left resize-pane -L
#bind -n C-Right resize-pane -R

# swap panes
bind C-Up swap-pane -U
bind C-Down swap-pane -D

# Enable mouse mode (tmux 2.1 and above)
set -g mouse on

# rename windows (or not)
set-option -g set-titles off
set-option -g allow-rename off
set-window-option -g automatic-rename off

#########################################################################################################################################################
# DESIGN CHANGES 
#########################################################################################################################################################

# panes
# set -g window-style 'fg=colour247,bg=colour234'
# set -g window-active-style 'fg=colour250,bg=colour0'
# alactritty hack, not setting any bg color to keep opacity,
# https://github.com/jwilm/alacritty/issues/1180
set -g window-style 'fg=colour247'
set -g window-active-style 'fg=colour250'

set -g pane-border-style 'bg=colour234, fg=colour255'
set -g pane-active-border-style 'bg=colour0, fg=colour12'

## Status bar design
# status line
# set -g status-utf8 on
set -g status-justify centre
set -g status-style 'bg=default, fg=colour234'
set -g status-interval 2

# messaging
set -g message-command-style 'fg=blue, bg=black'

# window status
setw -g window-status-format " #F#I:#W#F "
setw -g window-status-current-format " #F#I:#W#F "
setw -g window-status-format "#[fg=magenta]#[bg=black] #I #[bg=cyan]#[fg=colour8] #W "
setw -g window-status-current-format "#[bg=brightmagenta]#[fg=colour8] #I #[fg=colour8]#[bg=colour14] #W "
setw -g window-status-style 'reverse, bg=green, fg=black'
setw -g window-status-current-style 'dim'

# Info on left (I don't have a session display for now)
set -g status-left ':)'

# loud or quiet?
set-option -g visual-activity off
set-option -g visual-bell off
set-option -g visual-silence off
set-window-option -g monitor-activity off
set-option -g bell-action none

# The modes {
setw -g clock-mode-colour colour125
setw -g mode-style 'bold, fg=colour0, bg=colour46'

# }

# The statusbar {

set -g status-position top
set -g status-style 'bg=colour249, fg=colour0, dim'
set -g status-right '#[fg=colour233,bg=colour241,bold] %d/%m #[fg=colour233,bg=colour245,bold] %H:%M:%S '
set -g status-right-length 50
set -g status-left-length 20

setw -g window-status-current-style 'bold, fg=colour81, bg=colour238'
setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour50]#F '

setw -g window-status-style 'fg=colour138, bg=colour235, none'
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

setw -g window-status-bell-style 'bold, fg=colour255, bg=colour1'

# }
# The messages {
set -g message-style 'bold, fg=colour232, bg=colour166'
# }


#########################################################################################################################################################
# Tmux Plugin Manager - TPM
#########################################################################################################################################################
set -g @plugin 'tmux-plugins/tpm'

set -g @plugin 'tmux-plugins/tmux-sensible'

set -g @plugin 'tmux-plugins/tmux-yank'

set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @resurrect-capture-pane-contents 'on'

# https://github.com/christoomey/vim-tmux-navigator
set -g @plugin 'christoomey/vim-tmux-navigator'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

